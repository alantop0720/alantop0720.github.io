```
ifconfig eth1 192.168.1.1 netmask 255.255.255.0

route add default gw 192.168.31.1

dns
vim resolv.conf

ifconfig eth1 10.2.3.8 netmask 255.255.255.0

```



# 配置转发

```
iptables -F
iptables -P INPUT ACCEPT
iptables -P FORWARD ACCEPT
iptables -t nat -A POSTROUTING -o enx000ec62e8714 -j MASQUERADE
```



# 配置网卡

```
ifconfig eth1 10.2.3.7 netmask 255.255.255.0
ifconfig eth2 192.168.31.3 netmask 255.255.255.0
route add default gw 192.168.31.1

vim /etc/resvo.conf
```

# 防火墙

```
# 拒绝转发来自 192.168.1.10 主机的数据，允许转发192.168.0/24网段的数据

# 拒绝所有流量

# iptables -P INPUT DROP

# iptables -A FORWARD -s 192.168.1.10 -j REJECT

# iptables -A FORWARD -s 192.168.0.0/24 -j ACCEPT

# 注意要把拒绝放前面，不然不起作用

iptables -F
iptables -X
iptables -Z
iptables -P INPUT DROP
iptables -A FORWARD -s 10.2.3.0/24 -j ACCEPT
iptables -A INPUT -s 10.2.3.0/24 -j ACCEPT
```

```
etc/netplan/01-network-manager-all.yaml
```


# 修改配置文件

```
  ethernets:

    ens33:
      dhcp4: false
      dhcp6: true
      addresses:
        - 10.10.10.19/24
        - 10.10.10.20/24
        - 10.10.10.21/24
      optional: true
      routes:
        - to: default
          via: 10.10.10.1
      nameservers:
        addresses:
          - 223.5.5.5
          - 223.6.6.6
```

# 应用

```
netplan apply 
```

